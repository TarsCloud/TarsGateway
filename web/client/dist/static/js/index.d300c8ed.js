(function(t){function e(e){for(var o,s,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(o=!1)}o&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var o={},i={index:0},r=[];function s(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=o,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(a,o,function(e){return t[e]}.bind(null,o));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/plugins/base/gateway/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("b635")},"354a":function(t,e,a){},"5c9e":function(t,e,a){},6609:function(t,e,a){},7142:function(t,e,a){},"79c7":function(t,e,a){},8266:function(t,e,a){"use strict";var o=a("79c7"),i=a.n(o);i.a},"8c66":function(t,e,a){"use strict";var o=a("e581"),i=a.n(o);i.a},a082:function(t,e,a){},a7e4:function(t,e,a){"use strict";var o=a("5c9e"),i=a.n(o);i.a},b2a9:function(t,e,a){"use strict";var o=a("354a"),i=a.n(o);i.a},b635:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("a026"),i=a("00e7"),r=a.n(i),s=a("5c96"),n=a.n(s),l=(a("a082"),a("1861")),c=a.n(l),d=(a("8c47"),a("6609"),a("0c80")),u=a.n(d),p=a("c400"),f=a.n(p);function m(){this.loading=null}o["default"].use(c.a,{locale:{en:f.a,cn:u.a}[r.a.get("locale")||"cn"]||u.a}),m.prototype.show=function(t){this.loading&&this.hide();var e=s["Loading"].service({fullscreen:!0,text:t||"Loading",background:"rgba(0,0,0,0)"});return this.loading=e,this},m.prototype.hide=function(){return this.loading&&(this.loading.close(),this.loading=null),this},m.show=function(t){return m._loading||(m._loading=new m),m._loading.show(t)},m.hide=function(){return m._loading||(m._loading=new m),m._loading.hide()},Object.defineProperty(o["default"].prototype,"$Loading",{get:function(){return this._loading||(this._loading=new m),this._loading},set:function(t){}}),Object.defineProperty(o["default"].prototype,"$loading",{get:function(){return this._loading||(this._loading=new m),this._loading},set:function(t){}});var h={error:function(t){o["default"].prototype.$message({showClose:!0,message:t,type:"error"})},success:function(t){o["default"].prototype.$message({showClose:!0,message:t,type:"success"})},warning:function(t){o["default"].prototype.$message({showClose:!0,message:t,type:"warning"})}};Object.defineProperty(o["default"].prototype,"$tip",{get:function(){return h},set:function(t){}});a("99af"),a("4160"),a("6d93"),a("c975"),a("a15b"),a("13d5"),a("fb6a"),a("b64b"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("159b");var _=a("d4ec"),g=a("bee2"),v=a("53ca"),w=function(t){return"string"===typeof t},y=Array.isArray,b=function(t){return"object"===Object(v["a"])(t)&&null!==t},$=function(t){return"function"===typeof t},x=Object.assign;function M(t){return String(t).replace(/(?:[\0- "-&\+-\}\x7F-\xA8\xAA-\xAD\xAF-\u2121\u2123-\u23E8\u23F0-\u23F2\u23F4-\u23F7\u23FB-\u24C1\u24C3-\u25B5\u25B7-\u25FF\u27C0-\u2933\u2936-\u2B04\u2B08-\u2B1A\u2B1D-\u2B4F\u2B51-\u2B54\u2B56-\u302F\u3031-\u303C\u303E-\u3296\u3298\u329A-\uD7FF\uE000-\uFFFF]|[\uD800-\uD83B\uD83F-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDC03\uDC05-\uDCCE\uDCD0-\uDD6F\uDD72-\uDD7D\uDD80-\uDD8D\uDD8F\uDD90\uDE52-\uDEFF]|\uD83D[\uDE50-\uDE7F\uDF00-\uDFFF]|\uD83E[\uDC00-\uDCFF\uDE00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~*]/g,(function(t){return"%".concat(t.charCodeAt().toString(16).slice(-2).toUpperCase())}))}function k(t){if(!t)return"";var e=[];return Object.keys(t).forEach((function(a){var o=t[a];null!==o&&void 0!==o||(o=""),e.push("".concat(M(a),"=").concat(M(o)))})),e.join("&").replace(/%20/g,"+")}function S(t){var e=function t(e,a,o){return y(o)||b(o)?(Object.keys(o).forEach((function(i){t(e,"".concat(a,"[").concat(i,"]"),o[i])})),e):(e[a]=o,e)};return k(Object.keys(t).reduce((function(a,o){return e(a,o,t[o])}),{}))}var O=function(){function t(e){Object(_["a"])(this,t),this.defaults=e}return Object(g["a"])(t,[{key:"get",value:function(t){return x({},this.defaults,t)}},{key:"set",value:function(t,e){var a=this;if(t){if(w(t)){var o=t.split(".");o.reduce((function(t,a,i){return i===o.length-1&&(t[a]=e),t[a]}),this.defaults)}b(t)&&Object.keys(t).forEach((function(e){a.set(e,t[e])})),y(t)&&t.forEach((function(t){return a.set(t,e)}))}}},{key:"remove",value:function(t){var e=this;if(t){if(w(t)){var a=t.split(".");a.reduce((function(t,e,o){return o===a.length-1&&delete t[e],t[e]}),this.defaults)}y(t)&&t.forEach((function(t){return e.remove(t)}))}}}]),t}(),D=function(){function t(e){Object(_["a"])(this,t),this.handler=e}return Object(g["a"])(t,[{key:"set",value:function(t){$(t)&&(this.handler=t)}},{key:"exec",value:function(){$(this.handler)&&this.handler.apply(null,arguments)}}]),t}(),j=function(){function t(e){Object(_["a"])(this,t),this.base=e||""}return Object(g["a"])(t,[{key:"set",value:function(t){w(t)&&(this.base=t)}},{key:"get",value:function(t){return this.base+(t||"")}}]),t}(),C=function t(){var e=this;Object(_["a"])(this,t),this.ServerUrl=new j,this.Options=new O({credentials:"same-origin",timeout:5e3}),this.Headers=new O({"X-Requested-With":"XMLHttpRequest"}),this.Body=new O({}),this.StatusHandler=new D,this.ResultHandler=new D((function(){return!0})),this.parseUrl=function(t,a){var o=k(e.Body.get(a));return o&&(o=-1===t.indexOf("?")?"?".concat(o):"&".concat(o)),t+o},this.checkStatus=function(t){var a=t.status;if(a>=200&&a<300||304===a)return t;throw e.StatusHandler.exec(a,t),new Error(t.statusText)},this.parseJSON=function(t){return t.json().then(null,(function(a){return e.StatusHandler.exec(500,t),Promise.reject(a)}))},this.successCallback=function(t){return e.ResultHandler.handler(t)?t:Promise.reject(t)},this.errorCallback=function(t){return Promise.reject(t)},this.get=function(t,a){var o=e.Options.get({headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),o).then(e.checkStatus).then(e.parseJSON).catch(e.errorCallback)},this.getJSON=function(t,a){var o=e.Options.get({headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),o).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.post=function(t,a){var o=e.Options.get({method:"POST",headers:e.Headers.get({"Content-Type":"application/x-www-form-urlencoded"}),body:S(e.Body.get(a))});return fetch(e.ServerUrl.get(t),o).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.postForm=function(t,a){var o=e.Options.get({method:"POST",headers:e.Headers.get(),body:a}),i=e.Body.get({});return Object.keys(i).forEach((function(t){a.append(t,i[t])})),fetch(e.ServerUrl.get(t),o).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.postJSON=function(t,a){var o=e.Options.get({method:"POST",headers:e.Headers.get({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(e.Body.get(a))});return fetch(e.ServerUrl.get(t),o).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.put=function(t,a){var o=e.Options.get({method:"PUT",headers:e.Headers.get({"Content-Type":"application/x-www-form-urlencoded"}),body:S(e.Body.get(a))});return fetch(e.ServerUrl.get(t),o).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.remove=function(t,a){var o=e.Options.get({method:"DELETE",headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),o).then(e.checkStatus).then(e.parseJSON).then(e.successCallback).catch(e.errorCallback)},this.getPlain=function(t,a){var o=e.Options.get({method:"GET",headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),o).then(e.checkStatus).then(e.successCallback).catch(e.errorCallback)},this.postPlain=function(t,a){var o=e.Options.get({method:"POST",headers:e.Headers.get()});return fetch(e.ServerUrl.get(e.parseUrl(t,a)),o).then(e.checkStatus).then(e.successCallback).catch(e.errorCallback)},this.postBinary=function(t,a){var o=e.Options.get({method:"POST",headers:e.Headers.get(),body:a});return fetch(e.ServerUrl.get(e.parseUrl(t)),o).then(e.checkStatus).then(e.successCallback).catch(e.errorCallback)},this.download=function(t,a){window.open(e.ServerUrl.get(e.parseUrl(t,a)))}},F=C,N=new F;N.ServerUrl.set("/plugins/base/gateway"),N.ResultHandler.set((function(t){return!(!t||200!==t.ret_code||null==t.data)})),["getJSON","postJSON"].forEach((function(t){var e=N[t];N["_".concat(t)]=e,N[t]=function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e.call.apply(e,[null].concat(a)).then((function(t){return t.data}))}})),Object.defineProperty(o["default"].prototype,"$ajax",{get:function(){return N.Headers.set("X-Token",window.localStorage.ticket||""),N}});var q=N,T=new F;T.ServerUrl.set("/pages"),T.ResultHandler.set((function(t){return!(!t||200!==t.ret_code||null==t.data)})),["getJSON","postJSON"].forEach((function(t){var e=T[t];T["_".concat(t)]=e,T[t]=function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return e.call.apply(e,[null].concat(a)).then((function(t){return t.data}))}})),Object.defineProperty(o["default"].prototype,"$tars",{get:function(){return T}});var z=function(){function t(e){Object(_["a"])(this,t),this.vue=e}return Object(g["a"])(t,[{key:"showSucc",value:function(t){"string"==typeof t?this.vue.$message({message:t,showClose:!0,type:"success"}):this.vue.$message({message:"".concat(this.vue.$t("common.success")),showClose:!0,type:"success"})}},{key:"showWarning",value:function(t){this.vue.$message({message:t,showClose:!0,type:"warning"})}},{key:"showError",value:function(t){"string"==typeof t?this.vue.$message({message:t,showClose:!0,type:"error"}):t&&(t.message||t.err_msg)?this.vue.$message({message:"".concat(this.vue.$t("common.error"),": ").concat(t.message||t.err_msg),showClose:!0,type:"error"}):this.vue.$message({message:"".concat(this.vue.$t("common.error")),showClose:!0,type:"error"})}},{key:"showCloudError",value:function(t,e){this.vue.$message({message:this.vue.$t("cloud.".concat(t,".").concat(e&&e.tars_ret||"-1")),showClose:!0,type:"error"})}}]),t}();Object.defineProperty(o["default"].prototype,"$common",{get:function(){return this.commonUtil||(this.commonUtil=new z(this)),this.commonUtil}});var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("keep-alive",[a("router-view",{staticClass:"main-width"})],1)],1)},P=[],I={name:"App",components:{},data:function(){return{}},mounted:function(){}},E=I,J=a("2877"),A=Object(J["a"])(E,U,P,!1,null,null,null),L=A.exports,B=a("8c4f"),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%","margin-top":"30px"}},[a("let-tabs",[a("let-tab-pane",{attrs:{tab:t.$t("gateway.station")}},[a("Station")],1),a("let-tab-pane",{attrs:{tab:t.$t("gateway.upstream")}},[a("Upstream")],1),a("let-tab-pane",{attrs:{tab:t.$t("gateway.globalblack")}},[a("BwList",{attrs:{station:t.globalStation,type:"black"}})],1)],1)],1)},R=[],W=(a("841c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_operation_templates"},[a("div",{staticClass:"between"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("let-form-item",{attrs:{label:t.$t("gateway.stationId")}},[a("let-input",{attrs:{size:"small"},model:{value:t.query.f_station_id,callback:function(e){t.$set(t.query,"f_station_id",e)},expression:"query.f_station_id"}})],1),a("let-form-item",{attrs:{label:t.$t("gateway.stationName")}},[a("let-input",{attrs:{size:"small"},model:{value:t.query.f_name_cn,callback:function(e){t.$set(t.query,"f_name_cn",e)},expression:"query.f_name_cn"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[t._v(t._s(t.$t("operate.search")))])],1)],1),a("div",[a("el-link",{attrs:{type:"info",href:"http://doc.tarsyun.com/#/gateway/README.md",target:"_blank"}},[t._v(t._s(t.$t("gateway.help")))])],1),a("div",[a("i",{staticClass:"el-icon-refresh-right",on:{click:function(e){return t.fetchData()}}}),t._v(" "),a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:t.addItem}},[t._v(t._s(t.$t("gateway.btn.addGateway")))]),a("let-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",theme:"primary"},on:{click:t.loadAll}},[t._v(t._s(t.$t("gateway.btn.loadAll")))])],1)],1),a("let-table",{ref:"table",attrs:{data:t.items,"empty-msg":t.$t("common.nodata")}},[a("let-table-column",{attrs:{title:t.$t("gateway.stationId"),prop:"f_station_id",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("gateway.stationName"),prop:"f_name_cn",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("gateway.monitorUrl"),prop:"f_monitor_url",width:"25%"}}),a("let-table-column",{attrs:{title:t.$t("gateway.lastUpdate"),prop:"f_update_time"}}),a("let-table-column",{attrs:{title:t.$t("operate.operates"),width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.viewItem(e.row)}}},[t._v(t._s(t.$t("operate.config")))]),a("let-table-operation",{on:{click:function(a){return t.editItem(e.row)}}},[t._v(t._s(t.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return t.removeItem(e.row)}}},[t._v(t._s(t.$t("operate.delete")))])]}}])})],1),a("let-pagination",{attrs:{page:t.pageNum,total:t.total},on:{change:t.gotoPage}}),a("br"),a("let-modal",{attrs:{title:(t.viewModal.model?t.viewModal.model.f_name_cn:"")+" "+t.$t("gateway.config.title"),width:"1000px"},model:{value:t.viewModal.show,callback:function(e){t.$set(t.viewModal,"show",e)},expression:"viewModal.show"}},["http"==t.stationMode?a("let-tabs",[a("let-tab-pane",{attrs:{tab:t.$t("gateway.router.title")}},[t.viewModal.model?a("HttpRouter",{attrs:{station:t.viewModal.model}}):t._e()],1),a("let-tab-pane",{attrs:{tab:t.$t("gateway.flowControl.title")}},[t.viewModal.model?a("FlowControl",{attrs:{station:t.viewModal.model}}):t._e()],1),a("let-tab-pane",{attrs:{tab:t.$t("gateway.bwlist.title.black")}},[t.viewModal.model?a("BwList",{attrs:{station:t.viewModal.model,type:"black"}}):t._e()],1),a("let-tab-pane",{attrs:{tab:t.$t("gateway.bwlist.title.white")}},[t.viewModal.model?a("BwList",{attrs:{station:t.viewModal.model,type:"white"}}):t._e()],1)],1):t._e(),"tars"==t.stationMode?a("let-tabs",[a("let-tab-pane",{attrs:{tab:t.$t("gateway.flowControl.title")}},[t.viewModal.model?a("FlowControl",{attrs:{station:t.viewModal.model}}):t._e()],1),a("let-tab-pane",{attrs:{tab:t.$t("gateway.bwlist.title.black")}},[t.viewModal.model?a("BwList",{attrs:{station:t.viewModal.model,type:"black"}}):t._e()],1),a("let-tab-pane",{attrs:{tab:t.$t("gateway.bwlist.title.white")}},[t.viewModal.model?a("BwList",{attrs:{station:t.viewModal.model,type:"white"}}):t._e()],1)],1):t._e(),a("div",{attrs:{slot:"foot"},slot:"foot"})],1),a("let-modal",{attrs:{title:t.detailModal.isNew?this.$t("gateway.add.title"):this.$t("gateway.update.title"),width:"1000px"},on:{"on-confirm":t.saveItem,"on-cancel":t.closeDetailModal},model:{value:t.detailModal.show,callback:function(e){t.$set(t.detailModal,"show",e)},expression:"detailModal.show"}},[t.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:t.$t("gateway.stationId"),required:""}},[a("let-radio",{attrs:{label:"http"},model:{value:t.stationMode,callback:function(e){t.stationMode=e},expression:"stationMode"}},[t._v("http "+t._s(t.$t("gateway.http")))]),a("let-radio",{attrs:{label:"tars"},model:{value:t.stationMode,callback:function(e){t.stationMode=e},expression:"stationMode"}},[t._v("tars "+t._s(t.$t("gateway.tars")))]),"http"==t.stationMode?a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.add.idFormatTips"),required:"","required-tip":t.$t("gateway.add.idFormatTips"),pattern:"^[a-zA-Z](([a-zA-Z_0-9](?<!obj|Obj))+)?$"},model:{value:t.detailModal.model.f_station_id,callback:function(e){t.$set(t.detailModal.model,"f_station_id",e)},expression:"detailModal.model.f_station_id"}}):t._e(),"tars"==t.stationMode?a("ServantSelector",{model:{value:t.detailModal.model.f_station_id,callback:function(e){t.$set(t.detailModal.model,"f_station_id",e)},expression:"detailModal.model.f_station_id"}}):t._e()],1),a("let-form-item",{attrs:{label:t.$t("gateway.stationName"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.add.stationNameTips"),required:"","required-tip":t.$t("gateway.add.stationNameTips")},model:{value:t.detailModal.model.f_name_cn,callback:function(e){t.$set(t.detailModal.model,"f_name_cn",e)},expression:"detailModal.model.f_name_cn"}})],1),a("let-form-item",{attrs:{label:t.$t("gateway.monitorUrl")}},[a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.add.monitorUrlTips")},model:{value:t.detailModal.model.f_monitor_url,callback:function(e){t.$set(t.detailModal.model,"f_monitor_url",e)},expression:"detailModal.model.f_monitor_url"}})],1)],1):t._e()],1)],1)}),G=[],Z=(a("8a79"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_operation_bwlist"},[a("div",{staticClass:"between"},[a("let-form",{ref:"detailForm",attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(e){return e.preventDefault(),t.addItem(e)}}},[a("let-form-item",{attrs:{label:"IP",required:""}},[a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.bwlist.ipTip"),required:"","required-tip":t.$t("gateway.bwlist.ipTip"),pattern:"^(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9]|\\*)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d|\\*)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d|\\*)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d|\\*)$"},model:{value:t.form.f_ip,callback:function(e){t.$set(t.form,"f_ip",e)},expression:"form.f_ip"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[t._v(t._s(t.$t("operate.add")))])],1),a("let-form-item")],1),a("div",[a("i",{staticClass:"el-icon-refresh-right",on:{click:function(e){return t.fetchData()}}}),t._v(" "),a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:t.loadAll}},[t._v(t._s(t.$t("gateway.btn.loadAll")))])],1)],1),a("let-table",{ref:"table",attrs:{data:t.items,"empty-msg":t.$t("common.nodata")}},[a("let-table-column",{attrs:{title:"IP",prop:"f_ip",width:"300px"}}),a("let-table-column",{attrs:{title:t.$t("gateway.lastUpdate"),prop:"f_update_time"}}),a("let-table-column",{attrs:{title:t.$t("operate.operates"),width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.removeItem(e.row)}}},[t._v(t._s(t.$t("operate.delete")))])]}}])})],1)],1)}),V=[],X={name:"BwList",props:{station:{type:Object,required:!0},type:{type:String,required:!0}},data:function(){return{items:[],form:{f_ip:""}}},methods:{fetchData:function(){var t=this;return this.$ajax.getJSON("/api/bwlist",{f_station_id:this.station.f_station_id,type:this.type}).then((function(e){t.items=e})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},loadAll:function(){var t=this,e=this.$Loading.show();this.$ajax.postJSON("/api/loadAll_conf",{command:"loadAll"}).then((function(a){e.hide();var o=a[0].err_msg.replace(/\n/g,"<br>");if(0!==a[0].ret_code)throw new Error(o);var i={title:t.$t("common.success"),message:o,duration:0};t.$tip.success(i)})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))},addItem:function(){var t=this;if(this.$refs.detailForm.validate()){var e=this.form;e.f_station_id=this.station.f_station_id,e.type=this.type;var a="/api/add_bwlist",o=this.$Loading.show();this.$ajax.postJSON(a,e).then((function(){o.hide(),t.$tip.success(t.$t("common.success")),t.form.f_ip="",t.fetchData()})).catch((function(e){o.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))}},removeItem:function(t){var e=this;this.$confirm(this.$t("gateway.delete.bwListConfirmTips"),this.$t("common.alert")).then((function(){var a=e.$Loading.show();e.$ajax.postJSON("/api/delete_bwlist",{f_id:t.f_id,type:e.type}).then((function(){a.hide(),e.fetchData().then((function(){e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))})).catch((function(){}))}},watch:{station:function(){this.items=[],this.fetchData()}},mounted:function(){this.fetchData()}},K=X,Q=(a("eeb8"),Object(J["a"])(K,Z,V,!1,null,"4783da40",null)),Y=Q.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("let-form",{ref:"detailForm",attrs:{itemWidth:"200px"},nativeOn:{submit:function(e){return e.preventDefault(),t.saveItem(e)}}},[a("let-form-item",{attrs:{label:t.$t("gateway.flowControl.duration"),required:""}},[a("let-input",{attrs:{size:"small",type:"number",disabled:!t.editing,placeholder:t.$t("gateway.flowControl.durationTip"),required:"","required-tip":t.$t("gateway.flowControl.durationTip"),pattern:"^\\d+$","pattern-tip":t.$t("gateway.flowControl.durationTip")},model:{value:t.form.f_duration,callback:function(e){t.$set(t.form,"f_duration",e)},expression:"form.f_duration"}})],1),a("let-form-item",{attrs:{label:t.$t("gateway.flowControl.maxFlow"),required:""}},[a("let-input",{attrs:{size:"small",type:"number",disabled:!t.editing,placeholder:t.$t("gateway.flowControl.maxFlowTip"),required:"","required-tip":t.$t("gateway.flowControl.maxFlowTip"),pattern:"^\\d+$","pattern-tip":t.$t("gateway.flowControl.maxFlowTip")},model:{value:t.form.f_max_flow,callback:function(e){t.$set(t.form,"f_max_flow",e)},expression:"form.f_max_flow"}})],1),a("let-form-item",[t.editing?t._e():a("let-button",{attrs:{size:"small",type:"button",theme:"primary"},on:{click:function(e){e.preventDefault(),t.editing=!0}}},[t._v(t._s(t.$t("operate.modify")))]),t.editing?a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[t._v(t._s(t.$t("operate.save")))]):t._e()],1),a("let-form-item")],1)],1)},et=[],at={name:"FlowControl",props:{station:{type:Object,required:!0}},data:function(){return{form:{f_duration:60,f_max_flow:0},editing:!1}},methods:{fetchData:function(){var t=this;return this.$ajax.getJSON("/api/get_flowcontrol",{f_station_id:this.station.f_station_id}).then((function(e){t.form=e.f_duration?e:{f_duration:60,f_max_flow:0}})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},saveItem:function(){var t=this;if(this.$refs.detailForm.validate()){var e=this.form;e.f_station_id=this.station.f_station_id;var a="/api/upsert_flowcontrol",o=this.$Loading.show();this.$ajax.postJSON(a,e).then((function(){o.hide(),t.$tip.success(t.$t("common.success")),t.fetchData(),t.editing=!1})).catch((function(e){o.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))}}},watch:{station:function(){this.items=[],this.fetchData()}},mounted:function(){this.fetchData()}},ot=at,it=Object(J["a"])(ot,tt,et,!1,null,"acad9b54",null),rt=it.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_operation_templates"},[a("div",{staticClass:"between"},[a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:t.addItem}},[t._v(t._s(t.$t("gateway.btn.addHttpRouter")))])],1),a("let-table",{ref:"table",attrs:{data:t.items,"empty-msg":t.$t("common.nodata")}},[a("let-table-column",{attrs:{title:t.$t("gateway.serverName"),prop:"f_server_name",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("gateway.pathRule"),prop:"f_path_rule",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("gateway.proxyPass"),prop:"f_proxy_pass",width:"25%"}}),a("let-table-column",{attrs:{title:t.$t("gateway.lastUpdate"),prop:"f_update_time",width:"160px"}}),a("let-table-column",{attrs:{title:t.$t("operate.operates"),width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.editItem(e.row)}}},[t._v(t._s(t.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return t.removeItem(e.row)}}},[t._v(t._s(t.$t("operate.delete")))])]}}])})],1),a("let-modal",{attrs:{title:t.detailModal.isNew?this.$t("gateway.btn.addHttpRouter"):this.$t("gateway.update.routerTitle"),width:"900px"},on:{"on-confirm":t.saveItem,"on-cancel":t.closeDetailModal},model:{value:t.detailModal.show,callback:function(e){t.$set(t.detailModal,"show",e)},expression:"detailModal.show"}},[t.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:t.$t("gateway.serverName")}},[a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.add.serverNameTip")},model:{value:t.detailModal.model.f_server_name,callback:function(e){t.$set(t.detailModal.model,"f_server_name",e)},expression:"detailModal.model.f_server_name"}})],1),a("let-form-item",{attrs:{label:t.$t("gateway.pathRule"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.add.pathRuleTip"),required:"","required-tip":t.$t("gateway.add.pathRuleTip"),"pattern-tip":t.$t("gateway.add.pathRuleTip")},model:{value:t.detailModal.model.f_path_rule,callback:function(e){t.$set(t.detailModal.model,"f_path_rule",e)},expression:"detailModal.model.f_path_rule"}})],1),a("let-form-item",{attrs:{label:t.$t("gateway.proxyPass"),required:""}},[a("let-radio",{attrs:{label:"ipport"},model:{value:t.proxypassMode,callback:function(e){t.proxypassMode=e},expression:"proxypassMode"}},[t._v("ip:port")]),a("let-radio",{attrs:{label:"upstream"},model:{value:t.proxypassMode,callback:function(e){t.proxypassMode=e},expression:"proxypassMode"}},[t._v("upstream")]),a("let-radio",{attrs:{label:"tars"},model:{value:t.proxypassMode,callback:function(e){t.proxypassMode=e},expression:"proxypassMode"}},[t._v("tars")]),"ipport"==t.proxypassMode?a("div",{staticClass:"set_upstream"},[a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.add.proxyPassTip"),pattern:"^(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9])\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d):\\d+$",required:"","required-tip":t.$t("gateway.add.proxyPassTip"),"pattern-tip":t.$t("gateway.add.proxyPassTip")},model:{value:t.detailModal.model.f_proxy_pass,callback:function(e){t.$set(t.detailModal.model,"f_proxy_pass",e)},expression:"detailModal.model.f_proxy_pass"}}),a("let-input",{attrs:{size:"small",placeholder:"/some/path",pattern:"^\\/","pattern-tip":"/some/path"},model:{value:t.detailModal.model.f_proxy_pass_path,callback:function(e){t.$set(t.detailModal.model,"f_proxy_pass_path",e)},expression:"detailModal.model.f_proxy_pass_path"}})],1):t._e(),"upstream"==t.proxypassMode?a("div",{staticClass:"set_upstream"},[a("let-select",{attrs:{size:"small",filterable:""},model:{value:t.detailModal.model.f_proxy_pass_upstream,callback:function(e){t.$set(t.detailModal.model,"f_proxy_pass_upstream",e)},expression:"detailModal.model.f_proxy_pass_upstream"}},t._l(t.upstreams,(function(e){return a("let-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1),a("let-input",{attrs:{size:"small",placeholder:"/some/path",pattern:"^\\/","pattern-tip":"/some/path"},model:{value:t.detailModal.model.f_proxy_pass_path,callback:function(e){t.$set(t.detailModal.model,"f_proxy_pass_path",e)},expression:"detailModal.model.f_proxy_pass_path"}})],1):t._e(),"tars"==t.proxypassMode&&t.detailModal.model?a("ServantSelector",{model:{value:t.detailModal.model.f_proxy_pass,callback:function(e){t.$set(t.detailModal.model,"f_proxy_pass",e)},expression:"detailModal.model.f_proxy_pass"}}):t._e()],1)],1):t._e()],1)],1)},nt=[],lt=(a("a630"),a("d81d"),a("6062"),a("3ca3"),a("498a"),a("ddb0"),a("3835")),ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select_wrapper"},[a("let-select",{staticClass:"select_item select_app",attrs:{size:"small"},on:{change:function(e){return t.changeSelect("application")}},model:{value:t.application,callback:function(e){t.application=e},expression:"application"}},t._l(t.applications,(function(e){return a("let-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1),a("let-select",{staticClass:"select_item select_server",attrs:{size:"small"},on:{change:function(e){return t.changeSelect("server_name")}},model:{value:t.server_name,callback:function(e){t.server_name=e},expression:"server_name"}},t._l(t.serverNames,(function(e){return a("let-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1),a("let-select",{staticClass:"select_item  select_obj",attrs:{size:"small"},on:{change:function(e){return t.changeSelect("obj")}},model:{value:t.obj,callback:function(e){t.obj=e},expression:"obj"}},t._l(t.objs,(function(e){return a("let-option",{key:e,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1)},dt=[],ut={name:"ServantSelector",model:{prop:"servant",event:"input"},props:{servant:String},data:function(){return{applications:[],serverNames:[],objs:[],application:"",server_name:"",obj:""}},methods:{changeSelect:function(t){var e=this;switch(t){case"application":this.serverNames=[],this.application&&this.getCascadeSelectServer({level:2,application:this.application},this.$t("common.error")).then((function(t){e.serverNames=t,e.serverNames.indexOf(e.server_name)<0&&(e.server_name="")}));break;case"server_name":this.objs=[],this.server_name&&this.getCascadeSelectServer({level:5,application:this.application,server_name:this.server_name},this.$t("common.error")).then((function(t){e.objs=t.map((function(t){return t.split(".").slice(-1)[0]})),e.objs.indexOf(e.obj)<0&&(e.obj="")}));break;case"obj":this.obj&&this.$emit("input","".concat(this.application,".").concat(this.server_name,".").concat(this.obj));break;default:break}},getCascadeSelectServer:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$t("common.error");return this.k8s?this.$tars.getJSON("/k8s/api/cascade_select_server",t).then((function(t){return t})).catch((function(t){e.$tip.error("".concat(a,": ").concat(t.message||t.err_msg))})):this.$tars.getJSON("/server/api/cascade_select_server",t).then((function(t){return t})).catch((function(t){e.$tip.error("".concat(a,": ").concat(t.message||t.err_msg))}))},initData:function(){if(this.servant&&/^[^.]+.[^.]+.[^.]+obj$/i.test(this.servant)){var t=this.servant.split(".");this.application=t[0]||"",this.server_name=t[1]||"",this.obj=t[2]||""}},getParam:function(t){var e=null,a=!1;if(0==location.search.indexOf("?")&&location.search.indexOf("=")>1){var o=unescape(location.search).substring(1,location.search.length).split("&"),i=0;while(i<o.length&&!a)o[i].indexOf("=")>0&&o[i].split("=")[0].toLowerCase()==t.toLowerCase()&&(e=o[i].split("=")[1],a=!0),i++}return e}},mounted:function(){var t=this;this.k8s=this.getParam("k8s"),this.initData(),this.getCascadeSelectServer({level:1},this.$t("common.error")).then((function(e){t.applications=e}))},watch:{servant:function(){this.initData()}}},pt=ut,ft=(a("8c66"),Object(J["a"])(pt,ct,dt,!1,null,"0c704f7b",null)),mt=ft.exports,ht=/(obj|Obj)$/,_t=/^(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|[1-9])\.(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|\d)\.(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|\d)\.(1\d{2}|2[0-4]\d|25[0-5]|[1-9]\d|\d):\d+/,gt=/^http:\/\//,vt={name:"HttpRouter",components:{ServantSelector:mt},props:{station:{type:Object,required:!0}},data:function(){return{items:[],upstreams:[],proxypassMode:"ipport",detailModal:{show:!1,model:null,isNew:!1}}},mounted:function(){this.fetchData(),this.fetchUpstreams()},methods:{fetchData:function(){var t=this,e=this.$refs.table.$loading.show();return this.$ajax.getJSON("/api/httprouter_list",{f_station_id:this.station.f_station_id}).then((function(a){e.hide(),t.items=a})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))},fetchUpstreams:function(){var t=this;return this.$ajax.getJSON("/api/upstream_list").then((function(e){if(e&&e.rows){var a=e.rows.map((function(t){return t.f_upstream}));a=Array.from(new Set(a)),t.upstreams=a}})).catch((function(e){t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.fetchUpstreams(),this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},editItem:function(t){if(this.fetchUpstreams(),t=Object.assign({},t),this.detailModal.model=t,this.detailModal.show=!0,this.detailModal.isNew=!1,t.f_proxy_pass=t.f_proxy_pass.replace(gt,""),this.setProxypassMode(t),"upstream"==this.proxypassMode)t.f_proxy_pass_upstream=t.f_proxy_pass.split("/")[0],t.f_proxy_pass_path="/"+(t.f_proxy_pass.split("/")[1]||""),this.$nextTick((function(){document.querySelector(".set_upstream .let-select__filter__input").value=t.f_proxy_pass_upstream}));else if("ipport"==this.proxypassMode){var e=t.f_proxy_pass.split("/"),a=Object(lt["a"])(e,2),o=a[0],i=a[1];t.f_proxy_pass=o,t.f_proxy_pass_path="/"+(i||"")}},setProxypassMode:function(t){ht.test(t.f_proxy_pass)?this.proxypassMode="tars":_t.test(t.f_proxy_pass)?this.proxypassMode="ipport":this.proxypassMode="upstream"},saveItem:function(){var t=this;if(this.$refs.detailForm.validate()){var e=this.detailModal.model;e.f_station_id=this.station.f_station_id;var a=e.f_id?"/api/update_httprouter":"/api/add_httprouter",o=this.$Loading.show(),i=Object.assign({},e);if("upstream"==this.proxypassMode){var r=document.querySelector(".set_upstream .let-select__filter__input").value.trim();i.f_proxy_pass_upstream=r,i.f_proxy_pass="".concat(i.f_proxy_pass_upstream).concat(i.f_proxy_pass_path||"")}else"ipport"==this.proxypassMode&&(i.f_proxy_pass="".concat(i.f_proxy_pass).concat(i.f_proxy_pass_path||""));gt.test(i.f_proxy_pass)||(i.f_proxy_pass="http://"+i.f_proxy_pass),this.$ajax.postJSON(a,i).then((function(){o.hide(),t.$tip.success(t.$t("common.success")),t.closeDetailModal(),t.fetchData()})).catch((function(e){o.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))}},removeItem:function(t){var e=this;this.$confirm(this.$t("gateway.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=e.$Loading.show();e.$ajax.postJSON("/api/delete_httprouter",{f_id:t.f_id}).then((function(){a.hide(),e.fetchData().then((function(){e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))})).catch((function(){}))}},watch:{station:function(){this.items=[],this.fetchData()}}},wt=vt,yt=(a("c5bb"),Object(J["a"])(wt,st,nt,!1,null,"75529cb0",null)),bt=yt.exports,$t={name:"Station",components:{BwList:Y,FlowControl:rt,HttpRouter:bt,ServantSelector:mt},data:function(){return{query:{f_station_id:"",f_name_cn:""},items:[],stationMode:"http",viewModal:{show:!1,model:null},detailModal:{show:!1,model:null,isNew:!1},pageNum:1,pageSize:12,total:1}},mounted:function(){this.fetchData(1)},methods:{gotoPage:function(t){this.fetchData(t)},fetchData:function(t){var e=this;t&&"number"==typeof t||(t=this.pageNum||1);var a=this.$refs.table.$loading.show();return this.query.page_size=this.pageSize,this.query.curr_page=t,this.$ajax.getJSON("/api/station_list",this.query).then((function(o){a.hide(),e.pageNum=t,e.total=Math.ceil(o.count/e.pageSize),e.items=o.rows})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},addItem:function(){this.detailModal.model={},this.detailModal.show=!0,this.detailModal.isNew=!0},loadAll:function(){var t=this,e=this.$Loading.show();this.$ajax.postJSON("/api/loadAll_conf",{command:"loadAll"}).then((function(a){e.hide();var o=a[0].err_msg.replace(/\n/g,"<br>");if(0!==a[0].ret_code)throw new Error(o);var i={title:t.$t("common.success"),message:o,duration:0};t.$tip.success(i)})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))},viewItem:function(t){this.viewModal.model=t,this.setStationMode(t),this.viewModal.show=!0},editItem:function(t){this.detailModal.model=t,this.setStationMode(t),this.detailModal.show=!0,this.detailModal.isNew=!1},setStationMode:function(t){t.f_station_id.endsWith("obj")||t.f_station_id.endsWith("Obj")?this.stationMode="tars":this.stationMode="http"},saveItem:function(){var t=this;if(this.$refs.detailForm.validate()){var e=this.detailModal.model,a=e.f_id?"/api/update_station":"/api/add_station",o=this.$Loading.show();this.$ajax.postJSON(a,e).then((function(){o.hide(),t.$tip.success(t.$t("common.success")),t.closeDetailModal(),t.fetchData()})).catch((function(e){o.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))}},removeItem:function(t){var e=this;this.$confirm(this.$t("gateway.delete.confirmTips"),this.$t("common.alert")).then((function(){var a=e.$Loading.show();e.$ajax.postJSON("/api/delete_station",{f_id:t.f_id}).then((function(){a.hide(),e.fetchData().then((function(){e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))})).catch((function(t){console.error(t)}))}}},xt=$t,Mt=(a("b2a9"),Object(J["a"])(xt,W,G,!1,null,"664a6a65",null)),kt=Mt.exports,St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page_operation_templates"},[a("div",{staticClass:"between"},[a("let-form",{attrs:{inline:"",itemWidth:"200px"},nativeOn:{submit:function(e){return e.preventDefault(),t.search(e)}}},[a("let-form-item",{attrs:{label:"upstream"}},[a("let-input",{attrs:{size:"small"},model:{value:t.query.f_upstream,callback:function(e){t.$set(t.query,"f_upstream",e)},expression:"query.f_upstream"}})],1),a("let-form-item",[a("let-button",{attrs:{size:"small",type:"submit",theme:"primary"}},[t._v(t._s(t.$t("operate.search")))])],1)],1),a("el-alert",{staticStyle:{width:"30%"},attrs:{title:t.$t("gateway.upstreamInfo"),type:"info"}}),a("div",[a("i",{staticClass:"el-icon-refresh-right",on:{click:function(e){return t.fetchData()}}}),t._v(" "),a("let-button",{attrs:{size:"small",theme:"primary"},on:{click:t.addItem}},[t._v(t._s(t.$t("gateway.btn.addUpstream")))]),a("let-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",theme:"primary"},on:{click:t.loadAll}},[t._v(t._s(t.$t("gateway.btn.loadAll")))])],1)],1),a("let-table",{ref:"table",attrs:{data:t.items,"empty-msg":t.$t("common.nodata")}},[a("let-table-column",{attrs:{title:"upstream",prop:"f_upstream",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("gateway.addr"),prop:"f_addr",width:"20%"}}),a("let-table-column",{attrs:{title:t.$t("gateway.weight"),prop:"f_weight"}}),a("let-table-column",{attrs:{title:t.$t("gateway.fusing"),prop:"f_fusing_onoff"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(1==e.row.f_fusing_onoff?t.$t("gateway.fusingOn"):t.$t("gateway.fusingOff")))])]}}])}),a("let-table-column",{attrs:{title:t.$t("gateway.lastUpdate"),prop:"f_update_time"}}),a("let-table-column",{attrs:{title:t.$t("operate.operates"),width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("let-table-operation",{on:{click:function(a){return t.editItem(e.row)}}},[t._v(t._s(t.$t("operate.update")))]),a("let-table-operation",{on:{click:function(a){return t.removeItem(e.row)}}},[t._v(t._s(t.$t("operate.delete")))])]}}])})],1),a("let-pagination",{attrs:{page:t.pageNum,total:t.total},on:{change:t.gotoPage}}),a("br"),a("let-modal",{attrs:{title:t.detailModal.isNew?this.$t("gateway.btn.addUpstream"):this.$t("gateway.update.upstream"),width:"800px"},on:{"on-confirm":t.saveItem,"on-cancel":t.closeDetailModal},model:{value:t.detailModal.show,callback:function(e){t.$set(t.detailModal,"show",e)},expression:"detailModal.show"}},[t.detailModal.model?a("let-form",{ref:"detailForm",attrs:{itemWidth:"700px"}},[a("let-form-item",{attrs:{label:"upstream",required:""}},[a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.add.upstreamFormatTips"),required:"","required-tip":t.$t("gateway.add.upstreamFormatTips"),pattern:"^[a-zA-Z](([a-zA-Z0-9_](?<!obj|Obj))+)?$","pattern-tip":t.$t("gateway.add.upstreamFormatTips")},model:{value:t.detailModal.model.f_upstream,callback:function(e){t.$set(t.detailModal.model,"f_upstream",e)},expression:"detailModal.model.f_upstream"}})],1),a("let-form-item",{attrs:{label:t.$t("gateway.addr"),required:""}},[a("let-input",{attrs:{size:"small",placeholder:t.$t("gateway.add.addrFormatTips"),required:"",pattern:"^(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|[1-9])\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d)\\.(1\\d{2}|2[0-4]\\d|25[0-5]|[1-9]\\d|\\d):\\d+$","required-tip":t.$t("gateway.add.addrFormatTips"),"pattern-tip":t.$t("gateway.add.addrFormatTips")},model:{value:t.detailModal.model.f_addr,callback:function(e){t.$set(t.detailModal.model,"f_addr",e)},expression:"detailModal.model.f_addr"}})],1),a("let-form-item",{attrs:{label:t.$t("gateway.weight"),required:""}},[a("let-input",{attrs:{size:"small",type:"number",required:"",pattern:"^\\d+$","required-tip":t.$t("gateway.add.weightFormatTips"),placeholder:t.$t("gateway.add.weightFormatTips"),"pattern-tip":t.$t("gateway.add.weightFormatTips")},model:{value:t.detailModal.model.f_weight,callback:function(e){t.$set(t.detailModal.model,"f_weight",e)},expression:"detailModal.model.f_weight"}})],1),a("let-form-item",{attrs:{label:t.$t("gateway.fusing")}},[a("let-radio",{attrs:{label:1},model:{value:t.detailModal.model.f_fusing_onoff,callback:function(e){t.$set(t.detailModal.model,"f_fusing_onoff",e)},expression:"detailModal.model.f_fusing_onoff"}},[t._v(t._s(t.$t("gateway.fusingOn")))]),a("let-radio",{attrs:{label:0},model:{value:t.detailModal.model.f_fusing_onoff,callback:function(e){t.$set(t.detailModal.model,"f_fusing_onoff",e)},expression:"detailModal.model.f_fusing_onoff"}},[t._v(t._s(t.$t("gateway.fusingOff")))])],1)],1):t._e()],1)],1)},Ot=[],Dt={name:"Upstream",data:function(){return{query:{f_upstream:""},items:[],detailModal:{show:!1,model:null,isNew:!1},pageNum:1,pageSize:12,total:1}},mounted:function(){this.fetchData(1)},methods:{gotoPage:function(t){this.fetchData(t)},fetchData:function(t){var e=this;t&&"number"==typeof t||(t=this.pageNum||1);var a=this.$refs.table.$loading.show();return this.query.page_size=this.pageSize,this.query.curr_page=t,this.$ajax.getJSON("/api/upstream_list",this.query).then((function(o){a.hide(),e.pageNum=t,e.total=Math.ceil(o.count/e.pageSize),e.items=o.rows})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))},search:function(){this.fetchData()},closeDetailModal:function(){this.$refs.detailForm.resetValid(),this.detailModal.show=!1,this.detailModal.model=null},loadAll:function(){var t=this,e=this.$Loading.show();this.$ajax.postJSON("/api/loadAll_conf",{command:"loadAll"}).then((function(a){e.hide();var o=a[0].err_msg.replace(/\n/g,"<br>");if(0!==a[0].ret_code)throw new Error(o);var i={title:t.$t("common.success"),message:o,duration:0};t.$tip.success(i)})).catch((function(a){e.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(a.message||a.err_msg))}))},addItem:function(){this.detailModal.model={f_weight:1,f_fusing_onoff:1},this.detailModal.show=!0,this.detailModal.isNew=!0},viewItem:function(t){this.viewModal.model=t,this.viewModal.show=!0},editItem:function(t){this.detailModal.model=t,this.detailModal.show=!0,this.detailModal.isNew=!1},saveItem:function(){var t=this;if(this.$refs.detailForm.validate()){var e=this.detailModal.model,a=e.f_id?"/api/update_upstream":"/api/add_upstream",o=this.$Loading.show();this.$ajax.postJSON(a,e).then((function(){o.hide(),t.$tip.success(t.$t("common.success")),t.closeDetailModal(),t.fetchData()})).catch((function(e){o.hide(),t.$tip.error("".concat(t.$t("common.error"),": ").concat(e.message||e.err_msg))}))}},removeItem:function(t){var e=this;this.$confirm(this.$t("gateway.delete.upstreamConfirmTips"),this.$t("common.alert")).then((function(){var a=e.$Loading.show();e.$ajax.postJSON("/api/delete_upstream",{f_id:t.f_id}).then((function(){a.hide(),e.fetchData().then((function(){e.$tip.success(e.$t("common.success"))}))})).catch((function(t){a.hide(),e.$tip.error("".concat(e.$t("common.error"),": ").concat(t.message||t.err_msg))}))})).catch((function(){}))}}},jt=Dt,Ct=(a("a7e4"),Object(J["a"])(jt,St,Ot,!1,null,"384d65fc",null)),Ft=Ct.exports,Nt={name:"Gateway",components:{Station:kt,Upstream:Ft,BwList:Y},data:function(){return{globalStation:{f_station_id:""}}},methods:{getParam:function(t){var e=null,a=!1;if(0==location.search.indexOf("?")&&location.search.indexOf("=")>1){var o=unescape(location.search).substring(1,location.search.length).split("&"),i=0;while(i<o.length&&!a)o[i].indexOf("=")>0&&o[i].split("=")[0].toLowerCase()==t.toLowerCase()&&(e=o[i].split("=")[1],a=!0),i++}return e},checkLogin:function(){var t=this.getParam("ticket");t&&(window.localStorage.ticket=t)}},mounted:function(){this.checkLogin()}},qt=Nt,Tt=(a("8266"),Object(J["a"])(qt,H,R,!1,null,null,null)),zt=Tt.exports;o["default"].use(B["a"]);var Ut=B["a"].prototype.push;B["a"].prototype.push=function(t){return Ut.call(this,t).catch((function(t){return t}))};var Pt=B["a"].prototype.replace;B["a"].prototype.replace=function(t){return Pt.call(this,t).catch((function(t){return t}))};var It=new B["a"]({routes:[{path:"/gateway",name:"Gateway",component:zt},{path:"*",redirect:"/gateway"}],scrollBehavior:function(t,e,a){return{x:0,y:0}}}),Et=a("a925"),Jt=a("f0d9"),At=a.n(Jt),Lt=a("b2d6"),Bt=a.n(Lt);o["default"].use(Et["a"]),o["default"].use(r.a);var Ht=new Et["a"]({});Ht.setLocaleMessage("cn",At.a),Ht.setLocaleMessage("en",Bt.a);var Rt=[];function Wt(){return new Promise((function(t,e){q.getJSON("/get_locale").then((function(e){var a=r.a.get("locale");if("[object Object]"==Object.prototype.toString.call(e)){for(var o in e)Ht.mergeLocaleMessage(o,e[o]),Rt.push({localeCode:o,localeName:e[o]["localeName"],localeMessages:e});a=e[a]?a:"cn",Rt=e}Ht.locale=a,t()})).catch((function(t){e(t)}))}))}o["default"].config.productionTip=!1,Wt.call(void 0).then((function(){o["default"].use(n.a,{i18n:function(t,e){return Ht.t(t,e)}}),o["default"].use(r.a),new o["default"]({i18n:Ht,el:"#app",router:It,components:{indexApp:L},template:"<indexApp/>"})}))},c5bb:function(t,e,a){"use strict";var o=a("fb98"),i=a.n(o);i.a},e581:function(t,e,a){},eeb8:function(t,e,a){"use strict";var o=a("7142"),i=a.n(o);i.a},fb98:function(t,e,a){}});